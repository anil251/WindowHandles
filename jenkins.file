pipeline {

agent any
   stages{
   
      stage('Compile Clean'){
          steps {
             WithMaven(maven : 'maven-3.6.3'){
                sh 'mvn clean'
      }
     }
   }
   
   stage('Testing Stage'){
          steps {
             WithMaven(maven : 'maven-3.6.3'){
                sh 'mvn test'
      }
     }
   }
   
   stage('Deploy Stage'){
          steps {
             WithMaven(maven : 'maven-3.6.3'){
                sh 'mvn test deploy'
      		}
    	 }
   	  }
   
   }
   
}